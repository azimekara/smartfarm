@inject IToastService ToastManager


<DxButton Click="AddRoofActivity" CssClass="btn btn-secondary btn-lg" RenderStyle="ButtonRenderStyle.Secondary" style="width: 100%; height: 150px;" Text="Çatı Kontrolü İçin Tıklayınız" />



<DxPopup @bind-Visible="@_saveBoxVisible" HeaderText="@_saveBoxHeader" Width="500px" ShowFooter="false" CloseOnOutsideClick="false">
    <BodyContentTemplate>
       <RoofActivityPopUp CurrentDataItem="CurrentDataItem" DoneClick="SaveDoneClick"></RoofActivityPopUp>
    </BodyContentTemplate>
    <FooterContentTemplate Context="Context">
        <div class="popup-demo-events-footer">
            <DxButton CssClass="popup-demo-events-button ms-2" RenderStyle="ButtonRenderStyle.Primary" Text="OK" Click="SaveDoneClick" />
        </div>
    </FooterContentTemplate>
</DxPopup>

@code {

    bool _saveBoxVisible;
    string? _saveBoxHeader;

    RoofActivity? CurrentDataItem { get; set; }
    protected override void OnInitialized()
    {

    }

    public void AddRoofActivity()
    {
        try
        {
            CurrentDataItem = new RoofActivity()
            {

            };
            _saveBoxHeader = "Çatı Aktivitesi";
            _saveBoxVisible = true;
            StateHasChanged();
        }
        catch(Exception ex)
        {
            ToastManager.ShowError(ex.Message);
        }
    }

    protected void SaveDoneClick()
    {
        _saveBoxVisible = false;
        StateHasChanged();

    }
}
